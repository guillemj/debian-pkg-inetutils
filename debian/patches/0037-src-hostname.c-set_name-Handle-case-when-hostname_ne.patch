From 55084756318a749156ae7819f886a796ba05b025 Mon Sep 17 00:00:00 2001
From: "Alfred M. Szmidt" <ams@gnu.org>
Date: Mon, 10 Jul 2017 20:08:00 +0000
Subject: [PATCH 37/42] src/hostname.c (set_name): Handle case when
 hostname_new is NULL.

---
 ChangeLog      | 5 +++++
 src/hostname.c | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/hostname.c b/src/hostname.c
index 7178cc40..95bf1080 100644
--- a/src/hostname.c
+++ b/src/hostname.c
@@ -232,7 +232,7 @@ set_name (const hostname_arguments *const args)
   else
     hostname_new = args->hostname_new;
 
-  size = strlen (hostname_new);
+  size = hostname_new ? strlen (hostname_new) : 0;
   if (!size)
     error (EXIT_FAILURE, 0, "Empty hostname");
 
-- 
2.20.1.791.gb4d0f1c61a

