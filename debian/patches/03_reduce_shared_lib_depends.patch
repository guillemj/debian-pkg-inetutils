---
 am/libcurses.m4     |    4 ----
 configure.ac        |    6 +++---
 ftp/Makefile.am     |    4 +++-
 src/Makefile.am     |   10 ++++++++--
 telnet/Makefile.am  |    5 ++++-
 telnetd/Makefile.am |    5 ++++-
 6 files changed, 22 insertions(+), 12 deletions(-)

--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -24,6 +24,7 @@ inetdaemon_PROGRAMS =
 bin_PROGRAMS =
 EXTRA_PROGRAMS =
 
+LDADD = $(iu_LIBRARIES) $(LIBUTIL)
 
 bin_PROGRAMS += @hostname_BUILD@
 hostname_SOURCES = hostname.c
@@ -35,6 +36,7 @@ EXTRA_PROGRAMS += logger
 
 bin_PROGRAMS += @rcp_BUILD@
 rcp_SOURCES = rcp.c
+rcp_LDADD = $(LDADD) $(LIBAUTH)
 EXTRA_PROGRAMS += rcp
 
 bin_PROGRAMS += @rexec_BUILD@
@@ -43,10 +45,12 @@ EXTRA_PROGRAMS += rexec
 
 bin_PROGRAMS += @rlogin_BUILD@
 rlogin_SOURCES = rlogin.c
+rlogin_LDADD = $(LDADD) $(LIBAUTH)
 EXTRA_PROGRAMS += rlogin
 
 bin_PROGRAMS += @rsh_BUILD@
 rsh_SOURCES = rsh.c
+rsh_LDADD = $(LDADD) $(LIBAUTH)
 EXTRA_PROGRAMS += rsh
 
 bin_PROGRAMS += @tftp_BUILD@
@@ -55,6 +59,7 @@ EXTRA_PROGRAMS += tftp
 
 bin_PROGRAMS += @traceroute_BUILD@
 traceroute_SOURCES = traceroute.c
+traceroute_LDADD = $(LDADD) $(top_builddir)/libicmp/libicmp.a
 EXTRA_PROGRAMS += traceroute
 
 inetdaemon_PROGRAMS += @inetd_BUILD@
@@ -63,14 +68,17 @@ EXTRA_PROGRAMS += inetd
 
 inetdaemon_PROGRAMS += @rexecd_BUILD@
 rexecd_SOURCES = rexecd.c
+rexecd_LDADD = $(LDADD) $(LIBCRYPT)
 EXTRA_PROGRAMS += rexecd
 
 inetdaemon_PROGRAMS += @rlogind_BUILD@
 rlogind_SOURCES = rlogind.c
+rlogind_LDADD = $(LDADD) $(LIBUTIL) $(LIBAUTH)
 EXTRA_PROGRAMS += rlogind
 
 inetdaemon_PROGRAMS += @rshd_BUILD@
 rshd_SOURCES = rshd.c
+rshd_LDADD = $(LDADD) $(LIBAUTH)
 EXTRA_PROGRAMS += rshd
 
 inetdaemon_PROGRAMS += @syslogd_BUILD@
@@ -83,12 +107,11 @@ EXTRA_PROGRAMS += tftpd
 
 inetdaemon_PROGRAMS += @uucpd_BUILD@
 uucpd_SOURCES = uucpd.c
+uucpd_LDADD = $(LDADD) $(LIBCRYPT)
 EXTRA_PROGRAMS += uucpd
 
 INCLUDES = $(iu_INCLUDES) -I$(top_srcdir)/libicmp
 
-LDADD = $(iu_LIBRARIES) $(top_builddir)/libicmp/libicmp.a $(LIBAUTH) $(LIBCRYPT) $(LIBUTIL)
-
 AM_CPPFLAGS = $(PATHDEF_BSHELL) $(PATHDEF_CONSOLE) $(PATHDEF_CP) $(PATHDEF_DEFPATH) $(PATHDEF_DEV) $(PATHDEF_INETDCONF) $(PATHDEF_INETDDIR) $(PATHDEF_INETDPID) $(PATHDEF_KLOG) $(PATHDEF_LOG) $(PATHDEF_LOGCONF) $(PATHDEF_LOGIN) $(PATHDEF_LOGPID) $(PATHDEF_NOLOGIN) $(PATHDEF_RLOGIN) $(PATHDEF_RSH) $(PATHDEF_TTY) $(PATHDEF_UTMP) $(PATHDEF_UUCICO)
 
 SUIDMODE = -o root -m 4775
--- a/configure.ac
+++ b/configure.ac
@@ -140,8 +140,8 @@ AC_PROG_LN_S
 gl_INIT
 
 ### Checks for libraries.
-AC_CHECK_LIB(nsl, inet_ntoa)
-AC_CHECK_LIB(resolv, gethostname)
+#AC_CHECK_LIB(nsl, inet_ntoa)
+#AC_CHECK_LIB(resolv, gethostname)
 AC_CHECK_LIB(socket, getpeername)
 
 # See if a termcap library is available (under one of several names)
@@ -169,7 +169,7 @@ AC_SUBST(LIBUTIL)
 
 # See if we have libpam.a this is for ftpd.
 if test "$with_pam" = yes ; then
-  AC_CHECK_LIB(dl, dlopen)
+  #AC_CHECK_LIB(dl, dlopen)
   AC_CHECK_LIB(pam, pam_authenticate, LIBPAM=-lpam)
   if test "$ac_cv_lib_pam_pam_authenticate" = yes ; then
      AC_DEFINE([WITH_PAM], 1, [Define to one if you have -lpam.])
--- a/telnetd/Makefile.am
+++ b/telnetd/Makefile.am
@@ -31,4 +31,7 @@ noinst_HEADERS = telnetd.h
 AM_CPPFLAGS = $(PATHDEF_DEV) $(PATHDEF_TTY) $(PATHDEF_LOGIN)
 INCLUDES = $(iu_INCLUDES) -I$(top_srcdir) $(INCAUTH) $(NCURSES_INCLUDE)
 
-LDADD = $(iu_LIBRARIES) $(top_builddir)/libtelnet/libtelnet.a $(LIBTERMCAP) $(LIBUTIL) $(LIBCRYPT) $(LIBAUTH) $(LIBREADLINE)
+LDADD = \
+	$(iu_LIBRARIES) \
+	$(top_builddir)/libtelnet/libtelnet.a \
+	$(LIBTERMCAP) $(LIBUTIL) $(LIBAUTH)
--- a/telnet/Makefile.am
+++ b/telnet/Makefile.am
@@ -29,4 +29,7 @@ noinst_HEADERS = defines.h externs.h gen
 INCLUDES = $(iu_INCLUDES) $(NCURSES_INCLUDE)
 AM_CPPFLAGS = -DTERMCAP -DLINEMODE -DKLUDGELINEMODE -DENV_HACK
 
-LDADD = $(iu_LIBRARIES) $(top_builddir)/libtelnet/libtelnet.a $(LIBTERMCAP) $(LIBCRYPT) $(LIBAUTH) $(LIBREADLINE)
+LDADD = \
+	$(iu_LIBRARIES) \
+	$(top_builddir)/libtelnet/libtelnet.a \
+	$(LIBTERMCAP) $(LIBAUTH)
--- a/am/libcurses.m4
+++ b/am/libcurses.m4
@@ -85,9 +85,6 @@ dnl LIBTERMCAP is defined with the appro
 dnl
 AC_DEFUN([IU_LIB_TERMCAP], [
   AC_REQUIRE([IU_LIB_NCURSES])
-  if test "$LIBNCURSES"; then
-    LIBTERMCAP="$LIBNCURSES"
-  else
     AC_CHECK_LIB(termcap, tgetent, LIBTERMCAP=-ltermcap)
     AC_CHECK_HEADERS([termcap.h])
     if test "$ac_cv_lib_termcap_tgetent" = yes \
@@ -113,7 +110,6 @@ AC_DEFUN([IU_LIB_TERMCAP], [
     if test -n "$LIBTERMCAP"; then
       AC_DEFINE([HAVE_TGETENT], 1, [Define to 1 if tgetent() exists.])
     fi
-  fi
   AC_SUBST(LIBTERMCAP)])dnl
 
 dnl IU_LIB_CURSES -- check for curses, and associated libraries
--- a/ftp/Makefile.am
+++ b/ftp/Makefile.am
@@ -30,4 +30,6 @@ noinst_HEADERS = extern.h ftp_var.h
 INCLUDES = $(iu_INCLUDES)
 AM_CPPFLAGS = $(PATHDEF_TMP) $(PATHDEF_BSHELL)
 
-LDADD = $(iu_LIBRARIES) $(LIBGLOB) $(LIBREADLINE) $(LIBTERMCAP) $(LIBHISTORY)
+LDADD = \
+	$(iu_LIBRARIES) \
+	$(LIBGLOB) $(LIBREADLINE)
