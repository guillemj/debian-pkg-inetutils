2006-10-21  Guillem Jover  <guillem@hadrons.org>

	* syslogd/syslogd.c (init): Close CF properly before returning.


Index: syslogd/syslogd.c
===================================================================
--- syslogd/syslogd.c.orig	2006-10-21 15:11:57.000000000 +0300
+++ syslogd/syslogd.c	2006-11-07 00:59:47.000000000 +0200
@@ -1657,6 +1657,7 @@ init (int signo)
     {
       /* There is no graceful recovery here.  */
       dbg_printf ("cannot allocate space for configuration\n");
+      fclose (cf);
       return;
     }
   cline = cbuf;
@@ -1696,6 +1697,7 @@ init (int signo)
 	    {
 	      /* Sigh ...  */
 	      dbg_printf ("cannot allocate space configuration\n");
+	      fclose (cf);
 	      free (cbuf);
 	      return;
 	    }
